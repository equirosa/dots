#!/bin/sh

file="$(realpath "$1")"
directory="${file%/*}"
basename="${file%.*}"
extension="${file##*.}"

latex_cleanup() {
	for ext in aux out log; do
		rm "$basename.$ext"
	done
}

case "$extension" in
	c) cc "$file" -o "$basename" ;;
	cpp) c++ "$file" -o "$basename" ;;
	md) pandoc -t ms --highlight-style kate -s -o "$basename".pdf "$file" ;;
	ms) groff -k -ms "$file" >> "$basename.pdf" ;;
	org) pandoc "$file" -o "$basename.pdf" ;;
	tex)
		xelatex "$1"
		latex_cleanup "$@"
		;;
esac
